Copyright: LGPL
Group: System/Configuration
Source: dtc.tar.gz
BuildRoot: %{_tmppath}/%{name}-root
Requires: php >= 4.1, php-mysql >= 4.1, qmail >= 1.03, apache >= 1.3, mysql

%description
A complete webhosting package that deliver a web GUI for administration.
Domain Technologie Control (DTC) is a set of PHP scripts that manage a MySQL
database that handles all the host information. It generates backup scripts,
statistic calculation scripts, and config files for bind, Apache, qmail, and
proftpd, using a single system UID/GID. With DTC, you can delegate the task
of creating subdomains, email, and FTP accounts to users for the domain
names they own.

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT/usr/share/dtc
cp -r admin $RPM_BUILD_ROOT/usr/share/dtc
cp -r client $RPM_BUILD_ROOT/usr/share/dtc
cp -r shared $RPM_BUILD_ROOT/usr/share/dtc
cp -r doc $RPM_BUILD_ROOT/usr/share/dtc

%prep
%setup -q -n %{name}

%post
mkdir -p %{_datadir}/dtc/etc/zones
chmod +x %{_datadir}/dtc/admin/dtc.rpm-install.sh
chmod +x %{_datadir}/dtc/admin/dtc.rpm-uninstall.sh
chown -R root:root %{_datadir}/dtc
echo To complete installation, please run %{_datadir}/dtc/admin/dtc.rpm-install.sh

%postun
echo To complete uninstallation, please run %{_datadir}/dtc/admin/dtc.rpm-uninstall.sh

%files
%{_datadir}/dtc/admin/*
%{_datadir}/dtc/shared/*
%{_datadir}/dtc/client/*
%{_datadir}/dtc/doc/*

%clean
rm -rf $RPM_BUILD_ROOT

